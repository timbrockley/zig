#!/bin/bash
#--------------------------------------------------------------------------------
#################################################################################
#--------------------------------------------------------------------------------
if [ "${1}" != "" ] && [ -f "${1}" ]
then
	#----------------------------------------
	zig test ${1} -Doptimize=Debug
	#----------------------------------------
elif [ -f "run-tests" ]
then
	#----------------------------------------
	/bin/bash run-tests ${*}
	exit $?
	#----------------------------------------
elif [ "${1}" == "" ] && [ -f "tests.zig" ]
then
	#----------------------------------------
	zig test tests.zig -Doptimize=Debug
	#----------------------------------------
elif [ "${1}" == "" ] && [ -f "main.zig" ]
then
	#----------------------------------------
	zig test main.zig -Doptimize=Debug
	#----------------------------------------
elif [ "${1}" == "" ] && [ -f "root.zig" ]
then
	#----------------------------------------
	zig test root.zig -Doptimize=Debug
	#----------------------------------------
elif [ "${1}" != "" ] && [ "${1}" != "all" ]
then
	#----------------------------------------
	zig test ${1} -Doptimize=Debug
	#----------------------------------------
else
	#----------------------------------------
	for FILENAME in *.zig
	do
		#----------------------------------------
		if [ -f "$FILENAME" ]
		then
			#----------------------------------------
			echo "${FILENAME}:"
			zig test ${FILENAME} -Doptimize=Debug
			echo
			#----------------------------------------
		fi
		#----------------------------------------
	done
	#----------------------------------------
fi
#--------------------------------------------------------------------------------
#################################################################################
#--------------------------------------------------------------------------------
